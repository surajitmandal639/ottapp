import{W as g,r as v,j as e,Y as N,b as w,y}from"./app-DWiplGih.js";import{b as S,s as m,a as l}from"./SweetAlert-_wzJVbyC.js";import{A as M}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";function T({auth:C,title:d,errors:u,maintenance:i}){const{data:t,setData:n,processing:c,errors:h}=g({title:i.title,description:i.description,secret:i.secret,status:i.status}),a={...u,...h},[p,r]=v.useState(!1),f=async s=>{if(await S("Do you want to enable maintenance mode?")){r(!0);try{const o=await w.post(route("maintenance-mode.change",s));o.data.status=="success"&&(n(j=>({...j,status:s})),m(o.data.message,null))}catch(o){console.log(o),l("Failed to update maintenance mode.")}finally{r(!1)}}},x=async s=>{s.preventDefault(),r(!0);try{await y.post(route("site-maintenance.save"),t,{onSuccess:()=>{r(!1),m("Site maintenance settings updated successfully")},onError:()=>{r(!1),l("An error occurred while submitting the form.")}})}catch{r(!1),l("An error occurred while submitting the form.")}};return e.jsxs(M,{isLoading:p,children:[e.jsx(N,{title:d}),e.jsxs("div",{className:"card-box",children:[e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Â "}),e.jsx("div",{className:"col-sm-8",children:e.jsxs("button",{className:"btn btn-success btn-md waves-effect waves-light m-b-20 mt-2 pull-right",onClick:()=>f(t.status===1?0:1),children:[e.jsx("i",{className:"fa fa-bullseye"}),t.status===1?"Maintenance Mode On":"Maintenance Mode Off"]})})]}),e.jsxs("form",{onSubmit:x,acceptCharset:"UTF-8",className:"form-horizontal",children:[e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-2 col-form-label",children:["Title ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{className:`form-control ${a.title?"is-invalid":""}`,type:"text",name:"title",value:t.title,onChange:s=>n("title",s.target.value),placeholder:"Maintenance Title"}),a.title&&e.jsx("span",{className:"invalid-feedback",children:a.title})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Description"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("textarea",{name:"description",className:`form-control ${a.description?"is-invalid":""}`,value:t.description,onChange:s=>n("description",s.target.value),style:{height:"300px"}}),a.description&&e.jsx("span",{className:"invalid-feedback",children:a.description})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-2 col-form-label",children:["Maintenance Secret ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{className:`form-control ${a.secret?"is-invalid":""}`,type:"text",name:"secret",required:!0,value:t.secret,onChange:s=>n("secret",s.target.value),placeholder:"Maintenance Secret"}),e.jsxs("small",{className:"form-text text-muted",style:{fontSize:"14px"},children:["After placing the site in maintenance mode, you may navigate to the site URL matching this secret token and script will issue a maintenance mode bypass cookie to your browser.",e.jsx("br",{}),"Once the cookie has been issued to your browser, you will be able to browse the application normally as if it was not in maintenance mode."]})]})]}),e.jsx("div",{className:"form-group row",children:e.jsx("div",{className:"col-sm-8 offset-sm-2",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?"Updating...":"Update Maintenance Settings"})})})]})]})]})}export{T as default};
