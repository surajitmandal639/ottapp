import{W as v,j as s,Y as k,a as u,y as q}from"./app-DWiplGih.js";import{s as y}from"./SweetAlert-_wzJVbyC.js";import{A}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";const O=({auth:p,errors:x,gateway:e})=>{const{errors:f,setError:n,clearErrors:o,data:j,setData:b,reset:N}=v({name:(e==null?void 0:e.name)||"",short_info:(e==null?void 0:e.short_info)||"",api_key:(e==null?void 0:e.api_key)||"",api_secret:(e==null?void 0:e.api_secret)||"",status:(e==null?void 0:e.status)||1}),t={...x,...f},c={...e,...j},d=async(i,r)=>{let a=!0;try{await axios.post(route("gateways.checkUnique"),{field:i,value:r})&&n(i,`${i.charAt(0).toUpperCase()+i.slice(1)} must be unique.`)}catch(m){console.error("Error checking uniqueness",m)}return a},h=async(i,r)=>{let a=!0;switch(i){case"name":!r||typeof r!="string"||r.length>50?(n("name","Gateway name is required and must be a string with a maximum length of 50 characters."),a=!1):(a=await d("name",r),o("name"));break;case"short_info":isNaN(r)||r<0||r>100?(n("short_info","Gateway short info is "),a=!1):o("short_info");break;case"api_key":!r||typeof r!="string"||r.length>255?(n("api_key","API key is required and must be a string with a maximum length of 255 characters."),a=!1):(a=await d("api_key",r),o("api_key"));break;case"api_secret":const m=new Date().toISOString().split("T")[0];!r||r<m?(n("api_secret"," "),a=!1):o("api_secret");break;case"status":[1,2].includes(r)?o("status"):(n("status","Status is required and must be either 1 (Active) or 2 (Inactive)."),a=!1);break}return a},l=i=>{const{name:r,value:a}=i.target;b(r,a),h(r,a)},_=async i=>{if(i.preventDefault(),Object.keys(c).every(a=>h(a,c[a]))){const a=e?"Gateway updated successfully.":"Gateway created successfully.";await q.post(route("gateways.save",e==null?void 0:e.id),{...c},{onSuccess:()=>{y(a),e||N()}})}};return s.jsxs(A,{user:p.user,children:[s.jsx(k,{title:e?"Edit Gateway":"Add Gateway"}),s.jsxs("div",{className:"card-box table-responsive",children:[s.jsx("nav",{"aria-label":"breadcrumb ",children:s.jsxs("ol",{className:"breadcrumb text-primary",style:{justifyContent:"flex-end"},children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(u,{href:route("admin.dashboard"),children:"Dashboard"})}),s.jsx("li",{className:"breadcrumb-item",children:s.jsx(u,{href:route("admin.gateways"),children:"Gateways"})}),s.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Edit Gateway"})]})}),s.jsxs("form",{onSubmit:_,encType:"multipart/form-data",autoComplete:"off",children:[s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:["Gateway Name ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{className:"form-control",type:"text",name:"name",required:!0,value:c.name,onChange:l}),t&&t.name&&s.jsx("span",{className:"text-danger",children:t.name})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label",children:"Short Info"}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{className:"form-control",type:"text",name:"short_info",required:!0,value:c.short_info,onChange:l}),t&&t.short_info&&s.jsx("span",{className:"text-danger",children:t.short_info})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:[e.name," Api Key",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{className:"form-control",type:"text",name:"api_key",required:!0,value:c.api_key,onChange:l}),t.api_key&&s.jsx("span",{className:"text-danger",children:t.api_key})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:[e.name," Api Secret"]}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{className:"form-control",type:"text",name:"api_secret",value:c.api_secret,onChange:l}),t&&t.api_secret&&s.jsx("span",{className:"text-danger",children:t.api_secret})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label",children:"Status"}),s.jsxs("div",{className:"col-sm-8",children:[s.jsxs("select",{className:"form-control",name:"status",value:c.status,onChange:l,children:[s.jsx("option",{value:"1",children:"Active"}),s.jsx("option",{value:"2",children:"Inactive"})]}),t&&t.status&&s.jsx("span",{className:"text-danger",children:t.status})]})]}),s.jsx("div",{className:"form-group row",children:s.jsx("div",{className:"col-sm-12 text-center",children:s.jsx("button",{type:"submit",className:"btn btn-primary",children:"Update"})})})]})]})]})};export{O as default};
