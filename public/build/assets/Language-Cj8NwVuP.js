import{r as l,W as k,j as s,Y as P,y as x}from"./app-DWiplGih.js";import{M as _}from"./MyPagination-qmxJVFS1.js";import{s as N,b as $,a as I}from"./SweetAlert-_wzJVbyC.js";import{A as D}from"./AuthenticatedLayout-RN_dLH_b.js";import{a as F}from"./index.prod-SXC0ELQv.js";import{M as R}from"./Modal-CbKbkC1n.js";import"./jquery-TLgHKWof.js";import"./index-C5nD6nVr.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";import"./useWindow-CSbIcmA7.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./setPrototypeOf-DgZC2w_0.js";function Z({auth:y,languages:o}){const[d,m]=l.useState(!1),[t,S]=l.useState(!1),[H,f]=l.useState(null),{data:a,setData:u,clearErrors:E,reset:h,processing:C}=k({name:"",status:1}),[i,p]=l.useState({}),[c,v]=l.useState({});l.useEffect(()=>(d&&(p({}),v({})),()=>{}),[d]);const L=async e=>{e.preventDefault();const r=t?"Language updated successfully.":"Language created successfully.";await x.post(route("languages.save",encryptString(a==null?void 0:a.id)),{...a},{onSuccess:()=>{N(r),m(!1),h(),v({}),p({})},onError:n=>{t?p(n):v(n)}})},j=async(e,r)=>{if(!await $(`Are you sure you want to ${r} this language?`))return;const w=r==="delete"?"delete":r==="active"?"activate":"deactivate",M=r==="delete"?0:r==="active"?1:2;await x.post(route("languages.status",encryptString(e)),{status:M},{onSuccess:()=>{N(`Language ${w}d successfully.`)},onError:()=>{I(`Failed to ${w} the language. Please try again.`)}})},b=(e=null)=>{E(),h({name:(e==null?void 0:e.name)||"",status:(e==null?void 0:e.status)||1}),u({...e}),S(!!e),f((e==null?void 0:e.id)||null),m(!0)},g=()=>{m(!1),h(),f(null)},A=e=>{x.get(route("languages"),{page:e},{preserveState:!0})};return s.jsxs(s.Fragment,{children:[s.jsx(P,{title:"Languages"}),s.jsxs(D,{user:y.user,children:[s.jsxs("div",{className:"card-box table-responsive",children:[s.jsx("div",{className:"row mb-3",children:s.jsx("div",{className:"col-md-3",children:s.jsxs("button",{className:"btn btn-success",onClick:()=>b(null),children:[s.jsx("i",{className:"fa fa-plus"})," Add Language"]})})}),s.jsx("div",{className:"row",children:o.data.map((e,r)=>s.jsx("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-6",children:s.jsx("div",{className:"card m-b-20 p-3 lng_item_grid",children:s.jsxs("div",{className:"card-body p-0",children:[s.jsx("div",{className:"item_latter",title:e.name,children:e.name}),s.jsx("button",{className:"btn waves-effect waves-light btn-success m-r-5",onClick:()=>b(e),children:s.jsx("i",{className:"fa fa-edit"})}),s.jsx("button",{className:"btn waves-effect waves-light btn-danger",onClick:()=>j(e.id,"delete"),children:s.jsx("i",{className:"fa fa-remove"})}),s.jsx("label",{className:"switch-toggle m-0 p-0 fl-right",children:s.jsx(F,{checked:e.status==1,onChange:n=>j(e.id,n?"active":"inactive")})})]})})},r))})]}),s.jsx(_,{currentPage:o.current_page,lastPage:o.last_page,onPageChange:A}),s.jsxs(R,{show:d,onHide:g,centered:!0,style:{paddingRight:"17px"},children:[s.jsxs("div",{class:"modal-header pl-3 pr-3",children:[s.jsx("h4",{class:"modal-title mt-0",children:t?"Edit Language":"Add Language"}),s.jsx("button",{type:"button",class:"close","data-dismiss":"modal","aria-hidden":"true",onClick:g,children:"Ã—"})]}),s.jsx("div",{class:"modal-body pl-3 pr-3 pt-3 pb-0",children:s.jsxs("form",{onSubmit:e=>e.preventDefault(),children:[s.jsxs("div",{class:"form-group row",children:[s.jsx("label",{class:"col-sm-4 col-form-label",children:"Language Name"}),s.jsxs("div",{class:"col-sm-8",children:[s.jsx("input",{type:"text",name:"name",value:a==null?void 0:a.name,onChange:e=>u("name",e.target.value),className:`form-control ${t?i.name?"is-invalid":"":c.name?"is-invalid":""}`}),(t?i.name:c.name)&&s.jsx("div",{className:"invalid-feedback",children:t?i.name:c.name})]})]}),s.jsxs("div",{class:"form-group row",children:[s.jsx("label",{class:"col-sm-4 col-form-label",children:"Language Name"}),s.jsxs("div",{class:"col-sm-8",children:[s.jsxs("select",{name:"status",value:a==null?void 0:a.status,onChange:e=>u("status",e.target.value),className:`form-control ${t?i.status?"is-invalid":"":c.status?"is-invalid":""}`,children:[s.jsx("option",{value:1,children:"Active"}),s.jsx("option",{value:2,children:"Inactive"})]}),(t?i.status:c.status)&&s.jsx("div",{className:"invalid-feedback",children:t?i.status:c.status})]})]})]})}),s.jsx("div",{class:"modal-footer pl-3 pr-3 pb-0",children:s.jsx("button",{type:"button",className:"btn btn-primary waves-effect waves-light",disabled:C,onClick:L,children:t?"Update":"Save"})})]})]})]})}export{Z as default};
