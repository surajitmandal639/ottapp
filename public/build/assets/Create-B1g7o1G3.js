import{W as x,r as f,j as s,Y as v,a as j,y as r}from"./app-DWiplGih.js";import{s as c}from"./SweetAlert-_wzJVbyC.js";import{A as N}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";function k({auth:o,errors:l,section:e,videos:d}){const{data:i,setData:t,processing:m,reset:n}=x({title:(e==null?void 0:e.title)||"",video_ids:(e==null?void 0:e.videos.map(a=>a.id))||[],status:(e==null?void 0:e.status)||1});f.useEffect(()=>{e&&(t("title",e.title),t("video_ids",e.videos.map(a=>a.id)),t("status",e.status))},[e]);const u=a=>{t("video_ids",a.map(p=>p.id))},h=async a=>{a.preventDefault(),e?await r.post(route("sections.update",e.id),{...i,_method:"PUT"},{onSuccess:()=>c("Section updated successfully.")}):await r.post(route("sections.store"),i,{onSuccess:()=>{c("Section created successfully."),n()}})};return s.jsxs(N,{user:o.user,children:[s.jsx(v,{title:e?"Edit Section":"Add Section"}),s.jsxs("div",{className:"card-box table-responsive",children:[s.jsx("div",{className:"row",children:s.jsx(j,{href:"#",onClick:()=>window.history.back(),children:s.jsxs("h4",{className:"header-title m-t-0 m-b-30 text-primary pull-left",style:{fontSize:"20px"},children:[s.jsx("i",{className:"fa fa-arrow-left"})," Back"]})})}),s.jsxs("form",{onSubmit:h,className:"form-horizontal",children:[s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:["Section Title ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{type:"text",name:"title",value:i.title,onChange:a=>t("title",a.target.value),className:`form-control ${l.title?"is-invalid":""}`}),l.title&&s.jsx("span",{className:"invalid-feedback",children:l.title})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:["Videos ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("select",{name:"video_ids[]",options:d,value:d.filter(a=>i.video_ids.includes(a.id)),onChange:u,className:`form-control ${l.video_ids?"is-invalid":""}`}),l.video_ids&&s.jsx("span",{className:"invalid-feedback",children:l.video_ids})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label",children:"Status"}),s.jsx("div",{className:"col-sm-8",children:s.jsxs("select",{className:"form-control",name:"status",value:i.status,onChange:a=>t("status",a.target.value),children:[s.jsx("option",{value:"1",children:"Active"}),s.jsx("option",{value:"2",children:"Inactive"})]})})]}),s.jsx("div",{className:"form-group row",children:s.jsx("div",{className:"col-sm-8 offset-sm-3",children:s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:e?"Update Section":"Create Section"})})})]})]})]})}export{k as default};
