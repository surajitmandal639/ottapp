import{W as _,r as o,j as a,Y as u,a as C,y as x}from"./app-DWiplGih.js";import{s as h}from"./SweetAlert-_wzJVbyC.js";import{A as P}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";function D({auth:j,errors:l,user:e,subscription_plans:f,roles:N}){var r,p;const{data:n,setData:t,processing:v,reset:g}=_({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",password:(e==null?void 0:e.password)||"",avatar:null,subscription_plan:((r=e==null?void 0:e.subscriptionPlan)==null?void 0:r[0].id)||"",user_expiry_date:(e==null?void 0:e.user_expiry_date)||"",status:(e==null?void 0:e.status)||1,roles:((p=e==null?void 0:e.roles)==null?void 0:p.map(s=>({id:s.id,name:s.name})))||[]}),[m,d]=o.useState((e==null?void 0:e.image_url)||null);o.useEffect(()=>{e!=null&&e.image_url&&d(e.image_url)},[e]);const b=s=>{const c=s.target.files[0];t("avatar",c);const i=URL.createObjectURL(c);d(i)};o.useEffect(()=>{var s,c;e&&t({name:e.name||"",email:e.email||"",phone:e.phone||"",password:(e==null?void 0:e.password)||"",subscription_plan:((s=e==null?void 0:e.subscriptionPlan)==null?void 0:s[0].id)||"",user_expiry_date:e.user_expiry_date||"",status:e.status||1,roles:((c=e==null?void 0:e.roles)==null?void 0:c.map(i=>({id:i.id,name:i.name})))||[]})},[e]);const w=s=>{t("roles",s.map(c=>c.id))},y=async s=>{s.preventDefault(),e?await x.post(route("users.update",e.id),{...n,_method:"PUT"},{onSuccess:()=>h("User updated successfully.")}):await x.post(route("users.store"),n,{onSuccess:()=>{h("User created successfully."),g()}})};return a.jsxs(P,{user:j.user,children:[a.jsx(u,{title:e?"Edit User":"Add User"}),a.jsxs("div",{className:"card-box table-responsive",children:[a.jsx("div",{className:"row",children:a.jsx(C,{href:"#",onClick:()=>window.history.back(),children:a.jsxs("h4",{className:"header-title m-t-0 m-b-30 text-primary pull-left",style:{fontSize:"20px"},children:[a.jsx("i",{className:"fa fa-arrow-left"})," Back"]})})}),a.jsxs("form",{onSubmit:y,className:"form-horizontal",children:[a.jsxs("div",{className:"form-group row",children:[a.jsxs("label",{className:"col-sm-3 col-form-label",children:["Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"text",name:"name",value:n.name,onChange:s=>t("name",s.target.value),className:"form-control",required:!0}),l.name&&a.jsx("span",{className:"text-danger",children:l.name})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsxs("label",{className:"col-sm-3 col-form-label",children:["Email ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"email",name:"email",value:n.email,onChange:s=>t("email",s.target.value),className:"form-control",required:!0}),l.email&&a.jsx("span",{className:"text-danger",children:l.email})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsxs("label",{className:"col-sm-3 col-form-label",children:["Password",!e&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"password",name:"password",value:n.password,onChange:s=>t("password",s.target.value),className:"form-control",required:!e}),l.password&&a.jsx("span",{className:"text-danger",children:l.password})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Phone"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"text",name:"phone",value:n.phone||"",onChange:s=>t("phone",s.target.value),className:"form-control"}),l.phone&&a.jsx("span",{className:"text-danger",children:l.phone})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Roles"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("select",{name:"roles[]",options:N,value:n.roles,onChange:w}),l.roles&&a.jsx("span",{className:"text-danger",children:l.roles})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Avatar"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"file",name:"avatar",onChange:b,className:"form-control"}),l&&l.avatar&&a.jsx("span",{className:"text-danger",children:l.avatar})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"offset-sm-3"}),a.jsx("div",{className:"col-sm-8",children:m&&a.jsx("img",{src:m,alt:"Preview",className:"img-thumbnail mr-1",style:{width:"180px"}})})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"User Expiry Date"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"date",name:"user_expiry_date",value:n.user_expiry_date||"",onChange:s=>t("user_expiry_date",s.target.value),className:"form-control",placeholder:"mm/dd/yyyy"}),l.user_expiry_date&&a.jsx("span",{className:"text-danger",children:l.user_expiry_date})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Subscription Plan"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsxs("select",{className:"form-control",name:"subscription_plan",value:n.subscription_plan,onChange:s=>t("subscription_plan",s.target.value),children:[a.jsx("option",{value:"",children:"Select..."}),f.map(s=>a.jsx("option",{value:s.id,children:s.name},s.id))]}),l.subscription_plan&&a.jsx("span",{className:"text-danger",children:l.subscription_plan})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Status"}),a.jsx("div",{className:"col-sm-8",children:a.jsxs("select",{className:"form-control",name:"status",value:n.status,onChange:s=>t("status",s.target.value),children:[a.jsx("option",{value:"1",children:"Active"}),a.jsx("option",{value:"2",children:"Inactive"})]})})]}),a.jsx("div",{className:"form-group row",children:a.jsx("div",{className:"col-sm-8 offset-sm-3",children:a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:e?"Update":"Create"})})})]})]})]})}export{D as default};
