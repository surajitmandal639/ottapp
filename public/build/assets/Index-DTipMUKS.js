import{r as n,j as e,Y as D,a as h,e as u,y as l}from"./app-DWiplGih.js";import{M as E}from"./MyPagination-qmxJVFS1.js";import{b as f,s as b}from"./SweetAlert-_wzJVbyC.js";import{A as G}from"./AuthenticatedLayout-RN_dLH_b.js";import{a as L}from"./index.prod-SXC0ELQv.js";import"./jquery-TLgHKWof.js";import"./index-C5nD6nVr.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";const K=({auth:v,title:N,videos:t,languages:i,languageId:w,genres:d,genreId:y})=>{const[x,_]=n.useState(""),[g,S]=n.useState(w||""),[p,k]=n.useState(y||""),[r,c]=n.useState([]),C=s=>{s.target.checked?c(t.data.map(a=>a.id)):c([])},A=s=>{c(a=>a.includes(s)?a.filter(m=>m!==s):[...a,s])},V=async()=>{await f("Are you sure you want to delete the selected videos?")&&await l.post(route("admin.videos.deleteMultiple"),{ids:u(r)},{onSuccess:()=>{b("Selected videos deleted successfully."),c([])}})},o=(s,a=null,m=null)=>{s.preventDefault();const j={s:x,language_id:g,genre_id:p};a&&(j[a]=m),l.get(route("admin.videos"),j,{preserveState:!0})},I=async s=>{await f("Are you sure you want to delete this video?")&&l.delete(route("admin.videos.destroy",s))},P=s=>{l.get(route("admin.videos"),{page:s},{preserveState:!0})},F=async(s,a)=>{await l.put(route("admin.videos.status",s),{status:a},{onSuccess:()=>{b("Video status changed successfully.")}})};return e.jsx(e.Fragment,{children:e.jsxs(G,{user:v.user,children:[e.jsx(D,{title:N}),e.jsxs("div",{className:"card-box table-responsive",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("form",{onSubmit:o,className:"app-search",id:"search",role:"form",children:[e.jsx("input",{type:"text",name:"s",placeholder:"Search by title...",className:"form-control",value:x,onChange:s=>_(s.target.value)}),e.jsx("button",{type:"submit",children:e.jsx("i",{className:"fa fa-search"})})]})}),e.jsx("div",{className:"col-sm-6",children:" "}),e.jsx("div",{className:"col-md-3",children:e.jsxs(h,{href:route("admin.videos.create"),className:"btn btn-success btn-md waves-effect waves-light m-b-20 mt-2 pull-right","data-toggle":"tooltip",title:"Add Video","data-original-title":"Add Video",children:[e.jsx("i",{className:"fa fa-plus"})," Add Video"]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"wall-filter-block",children:e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{className:"col-sm-3",children:e.jsxs("select",{className:"form-control select2",name:"language_id",id:"filter_language_id",defaultValue:g,onChange:s=>{S(s.target.value),o(s,"language_id",s.target.value)},children:[e.jsx("option",{value:"",children:"Filter by Language"}),i&&Object.keys(i).map(s=>e.jsx("option",{value:s,children:i[s]},s))]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("select",{className:"form-control select2",name:"genre_id",id:"filter_genre_id",defaultValue:p,onChange:s=>{k(s.target.value),o(s,"genre_id",s.target.value)},children:[e.jsx("option",{value:"",children:"Filter by Genre"}),d&&Object.keys(d).map(s=>e.jsx("option",{value:s,children:d[s]},s))]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"checkbox checkbox-success pull-right",children:[e.jsx("input",{id:"select_all",type:"checkbox",name:"select_all",checked:r.length===t.data.length,onChange:C}),e.jsx("label",{htmlFor:"select_all",children:"Select All"}),"  ",e.jsxs("div",{className:"dropdown btn-group",children:[e.jsxs("button",{type:"button",className:"btn btn-info dropdown-toggle waves-effect","data-toggle":"dropdown","aria-expanded":"false",children:["Action",e.jsx("span",{className:"caret"})]}),e.jsx("div",{className:"dropdown-menu",children:e.jsx(h,{href:"#",className:"dropdown-item","data-action":"delete",id:"data_remove_selected",onClick:V,children:"Delete"})})]})]})})]})})}),e.jsx("br",{}),e.jsx("div",{className:"row",children:t.data.map(s=>e.jsx("div",{className:"col-lg-3 col-md-3 col-sm-3 col-xs-6",children:e.jsxs("div",{className:"card m-b-20",children:[e.jsxs("div",{className:"wall-list-item",children:[e.jsxs("div",{className:"checkbox checkbox-success wall_check",children:[e.jsx("input",{type:"checkbox",name:"post_ids[]",id:`checkbox_${s.id}`,value:s.id,checked:r.includes(s.id),onChange:()=>A(s.id)}),e.jsx("label",{htmlFor:`checkbox_${s.id}`})]}),e.jsx("p",{className:"wall_sub_text",children:s.name}),e.jsx("img",{className:"card-img-top thumb-xs img-fluid",src:s.thumbnail_url,alt:s.name})]}),e.jsxs("div",{className:"card-body p-3",children:[e.jsx(h,{href:route("admin.videos.create",u(s.id)),className:"btn btn-icon waves-effect waves-light btn-success m-r-5","data-toggle":"tooltip",title:"Edit",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{onClick:()=>I(u(s.id)),className:"btn btn-icon waves-effect waves-light btn-danger","data-toggle":"tooltip",title:"Remove",children:e.jsx("i",{className:"fa fa-remove"})}),e.jsx("label",{className:"switch-toggle m-0 p-0 fl-right",children:e.jsx(L,{checked:s.status===1,onChange:a=>{F(s.id,a)}})})]})]})},s.id))}),e.jsx(E,{currentPage:t.current_page,lastPage:t.last_page,onPageChange:P})]})]})})};export{K as default};
