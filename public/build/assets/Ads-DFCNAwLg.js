import{W as b,r as g,j as s,Y as y,a as N,y as L}from"./app-DWiplGih.js";import{s as w}from"./SweetAlert-_wzJVbyC.js";import{A as k}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";function F({errors:p,ad:e}){const{errors:x,setError:i,clearErrors:r,data:v,setData:n}=b({vast_type:(e==null?void 0:e.vast_type)||"URL",ad_video_local:null,ad_video_url:(e==null?void 0:e.ad_video_url)||"",custom_ad1_source:(e==null?void 0:e.custom_ad1_source)||"",custom_ad1_timestart:(e==null?void 0:e.custom_ad1_timestart)||"",custom_ad1_link:(e==null?void 0:e.custom_ad1_link)||"",custom_ad2_source:(e==null?void 0:e.custom_ad2_source)||"",custom_ad2_timestart:(e==null?void 0:e.custom_ad2_timestart)||"",custom_ad2_link:(e==null?void 0:e.custom_ad2_link)||"",custom_ad3_source:(e==null?void 0:e.custom_ad3_source)||"",custom_ad3_timestart:(e==null?void 0:e.custom_ad3_timestart)||"",custom_ad3_link:(e==null?void 0:e.custom_ad3_link)||""}),a={...p,...x},c={...e,...v},[d,j]=g.useState(null),_=(t,l)=>{let o=!0;switch(t){case"vast_type":["Local","URL"].includes(l)?r("vast_type"):(i("vast_type","Source Type is required and must be either 'Local' or 'URL'!!"),o=!1);break;case"ad_video_url":c.vast_type==="URL"&&(!l||!/^https?:\/\/.+/.test(l))?(i("ad_video_url","Source URL is required and must be a valid URL!!"),o=!1):r("ad_video_url");break;case"ad_video_local":e!=null&&e.ad_video_local?r("ad_video_local"):c.vast_type==="Local"&&!l?(i("ad_video_local","Source File is required for Local type!!"),o=!1):r("ad_video_local");break;case"custom_ad1_source":case"custom_ad2_source":case"custom_ad3_source":l&&!/^https?:\/\/.+/.test(l)?(i(t,"Ad Source must be a valid URL!!"),o=!1):r(t);break;case"custom_ad1_timestart":case"custom_ad2_timestart":case"custom_ad3_timestart":l&&!/^(\d{2}):(\d{2}):(\d{2})$/.test(l)?(i(t,"Timestart must be in HH:MM:SS format!!"),o=!1):r(t);break;case"custom_ad1_link":case"custom_ad2_link":case"custom_ad3_link":l&&!/^https?:\/\/.+/.test(l)?(i(t,"Link must be a valid URL!!"),o=!1):r(t);break}return o},m=t=>{const{name:l,value:o,files:u}=t.target;if(l==="ad_video_local"&&u.length>0){const h=u[0];n(l,h),j(URL.createObjectURL(h))}else n(l,o);_(l,o)},f=async t=>{if(t.preventDefault(),Object.keys(c).every(o=>_(o,c[o]))){const o=e?"Ad settings updated successfully":"Ad settings created successfully";await L.post(route("player-ad-settings.save",e==null?void 0:e.id),{...c},{onSuccess:()=>{w(o)}})}};return s.jsx(s.Fragment,{children:s.jsxs(k,{children:[s.jsx(y,{title:"Ad Settings"}),s.jsx("div",{className:"card-box",children:s.jsxs("form",{onSubmit:f,acceptCharset:"UTF-8",className:"form-horizontal",name:"ad_settings",id:"ad_settings",role:"form",encType:"multipart/form-data",children:[s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-6",children:[s.jsx("h4",{className:"m-t-0 m-b-30 header-title",style:{fontSize:"20px"},children:"VAST, VMAP and IMA / DFP Advertising"}),s.jsx("br",{}),s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label"}),s.jsx("div",{className:"col-sm-8",children:s.jsx("p",{children:"Currently support inline linear (pre-roll, mid-roll, post-roll, pods) and nonlinear ads. To add an VAST, VMAP or Google IMA URL path to the player to be played."})})]}),s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label",children:"Source Type"}),s.jsxs("div",{className:"col-sm-8",children:[s.jsxs("select",{className:"form-control",name:"vast_type",value:c.vast_type,onChange:m,children:[s.jsx("option",{value:"Local",children:"Local"}),s.jsx("option",{value:"URL",children:"URL"})]}),a.vast_type&&s.jsx("div",{className:"text-danger",children:a.vast_type})]})]}),c.vast_type==="Local"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label",children:"Source File"}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{type:"file",name:"ad_video_local",onChange:m,className:"form-control"}),a.ad_video_local&&s.jsx("div",{className:"text-danger",children:a.ad_video_local})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label"}),s.jsx("div",{className:"col-sm-8",children:d?s.jsxs("video",{controls:!0,className:"img-thumbnail",children:[s.jsx("source",{src:d,type:"video/mp4"}),"Your browser does not support the video tag."]}):s.jsxs("video",{controls:!0,className:"img-thumbnail",children:[s.jsx("source",{src:`/storage/upload/videos/${e==null?void 0:e.ad_video_local}`,type:"video/mp4",className:"text-white"}),"Your browser does not support the video tag."]})})]})]}),c.vast_type==="URL"&&s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label",children:"Source URL"}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{type:"text",name:"ad_video_url",value:c.ad_video_url,onChange:m,className:"form-control",placeholder:"http://example.com/demo.mp4"}),a.ad_video_url&&s.jsx("div",{className:"text-danger",children:a.ad_video_url})]})]})]}),s.jsxs("div",{className:"col-md-6",children:[s.jsx("h4",{className:"m-t-0 m-b-30 header-title",style:{fontSize:"20px"},children:"Built-in Advertisement"}),s.jsxs("div",{className:"form-group row",children:[s.jsx("label",{className:"col-sm-3 col-form-label"}),s.jsxs("div",{className:"col-sm-8",children:[s.jsxs("p",{children:[s.jsx("b",{children:"Source:"})," The ad source, it can be a mp4 video path, an image path, webpage URL or a youtube video url."]}),s.jsx("p",{}),s.jsxs("p",{children:[s.jsx("b",{children:"Timestart :"})," The ad start time when it will appear in hours:minutes:seconds format."]}),s.jsx("p",{}),s.jsxs("p",{children:[s.jsx("b",{children:"Link:"})," The link to open when the ad is clicked."]}),s.jsx("p",{})]})]}),[1,2,3].map(t=>s.jsxs("div",{children:[s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:["Ad",t," Source"]}),s.jsx("div",{className:"col-sm-8",children:s.jsxs("div",{className:"input-group",children:[s.jsx("input",{type:"text",name:`custom_ad${t}_source`,value:c[`custom_ad${t}_source`],onChange:m,className:"form-control"}),a[`custom_ad${t}_source`]&&s.jsx("div",{className:"text-danger",children:a[`custom_ad${t}_source`]})]})})]}),s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:["Ad",t," Timestart"]}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{type:"text",name:`custom_ad${t}_timestart`,value:c[`custom_ad${t}_timestart`],onChange:m,className:"form-control",placeholder:"00:00:00"}),a[`custom_ad${t}_timestart`]&&s.jsx("div",{className:"text-danger",children:a[`custom_ad${t}_timestart`]})]})]}),s.jsxs("div",{className:"form-group row",children:[s.jsxs("label",{className:"col-sm-3 col-form-label",children:["Ad",t," Link"]}),s.jsxs("div",{className:"col-sm-8",children:[s.jsx("input",{type:"text",name:`custom_ad${t}_link`,value:c[`custom_ad${t}_link`],onChange:m,className:"form-control"}),a[`custom_ad${t}_link`]&&s.jsx("div",{className:"text-danger",children:a[`custom_ad${t}_link`]})]})]})]},t))]})]}),s.jsx("div",{className:"form-group text-right m-b-0",children:s.jsxs("div",{className:"col-sm-offset-3 col-sm-9",children:[s.jsx("button",{className:"btn btn-primary waves-effect waves-light",type:"submit",children:"Save"}),s.jsx(N,{href:route("admin.player-ad-settings"),className:"btn btn-secondary waves-effect m-l-5",children:"Cancel"})]})})]})})]})})}export{F as default};
