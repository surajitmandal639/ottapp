import{W as b,r as c,j as a,Y as w,a as u,y as r}from"./app-DWiplGih.js";import{s as p}from"./SweetAlert-_wzJVbyC.js";import{A as y}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";function k({auth:x,errors:l,user:e,subscription_plans:h}){var o;const{data:t,setData:n,processing:j,reset:f}=b({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",password:(e==null?void 0:e.password)||"",avatar:null,subscription_plan:((o=e==null?void 0:e.subscription_plans)==null?void 0:o[0].id)||"",user_expiry_date:(e==null?void 0:e.user_expiry_date)||"",status:(e==null?void 0:e.status)||1}),[i,m]=c.useState((e==null?void 0:e.image_url)||null);c.useEffect(()=>{e!=null&&e.image_url&&m(e.image_url)},[e]);const N=s=>{const d=s.target.files[0];n("avatar",d);const g=URL.createObjectURL(d);m(g)};c.useEffect(()=>{var s;e&&n({name:e.name||"",email:e.email||"",phone:e.phone||"",password:(e==null?void 0:e.password)||"",subscription_plan:((s=e==null?void 0:e.subscription_plans)==null?void 0:s[0].id)||"",user_expiry_date:e.user_expiry_date||"",status:e.status||1})},[e]);const v=async s=>{s.preventDefault(),e?await r.post(route("users.update",e.id),{...t,_method:"PUT"},{onSuccess:()=>p("User updated successfully.")}):await r.post(route("users.store"),t,{onSuccess:()=>{p("User created successfully."),f()}})};return a.jsxs(y,{user:x.user,children:[a.jsx(w,{title:e?"Edit User":"Add User"}),a.jsxs("div",{className:"card-box table-responsive",children:[a.jsx("div",{className:"row",children:a.jsx(u,{href:"#",onClick:()=>window.history.back(),children:a.jsxs("h4",{className:"header-title m-t-0 m-b-30 text-primary pull-left",style:{fontSize:"20px"},children:[a.jsx("i",{className:"fa fa-arrow-left"})," Back"]})})}),a.jsxs("form",{onSubmit:v,className:"form-horizontal",children:[a.jsxs("div",{className:"form-group row",children:[a.jsxs("label",{className:"col-sm-3 col-form-label",children:["Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"text",name:"name",value:t.name,onChange:s=>n("name",s.target.value),className:"form-control",required:!0}),l.name&&a.jsx("span",{className:"text-danger",children:l.name})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsxs("label",{className:"col-sm-3 col-form-label",children:["Email ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"email",name:"email",value:t.email,onChange:s=>n("email",s.target.value),className:"form-control",required:!0}),l.email&&a.jsx("span",{className:"text-danger",children:l.email})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsxs("label",{className:"col-sm-3 col-form-label",children:["Password",!e&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"password",name:"password",value:t.password,onChange:s=>n("password",s.target.value),className:"form-control",required:!e}),l.password&&a.jsx("span",{className:"text-danger",children:l.password})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Phone"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"text",name:"phone",value:t.phone||"",onChange:s=>n("phone",s.target.value),className:"form-control"}),l.phone&&a.jsx("span",{className:"text-danger",children:l.phone})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsxs("label",{className:"col-sm-3 col-form-label",children:["Avatar ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"file",name:"avatar",onChange:N,className:"form-control"}),l&&l.avatar&&a.jsx("span",{className:"text-danger",children:l.avatar})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"offset-sm-3"}),a.jsx("div",{className:"col-sm-8",children:i&&a.jsx("img",{src:i,alt:"Preview",className:"img-thumbnail mr-1",style:{width:"180px"}})})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"User Expiry Date"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsx("input",{type:"date",name:"user_expiry_date",value:t.user_expiry_date||"",onChange:s=>n("user_expiry_date",s.target.value),className:"form-control",placeholder:"mm/dd/yyyy"}),l.user_expiry_date&&a.jsx("span",{className:"text-danger",children:l.user_expiry_date})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Subscription Plan"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsxs("select",{className:"form-control",name:"subscription_plan",value:t.subscription_plan,onChange:s=>n("subscription_plan",s.target.value),children:[a.jsx("option",{value:"",children:"Select..."}),h.map(s=>a.jsx("option",{value:s.id,children:s.name},s.id))]}),l.subscription_plan&&a.jsx("span",{className:"text-danger",children:l.subscription_plan})]})]}),a.jsxs("div",{className:"form-group row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Status"}),a.jsxs("div",{className:"col-sm-8",children:[a.jsxs("select",{className:"form-control",name:"status",value:t.status,onChange:s=>n("status",s.target.value),children:[a.jsx("option",{value:"1",children:"Active"}),a.jsx("option",{value:"2",children:"Inactive"})]}),l.status&&a.jsx("span",{className:"text-danger",children:l.status})]})]}),a.jsx("div",{className:"form-group row",children:a.jsx("div",{className:"col-sm-8 offset-sm-3",children:a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j,children:e?"Update":"Create"})})})]})]})]})}export{k as default};
