import{W as F,r as x,j as e,Y as L,y as N}from"./app-DWiplGih.js";import{s as b,a as n}from"./SweetAlert-_wzJVbyC.js";import{A as P}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";function q({title:g,errors:_,providers:y}){const{errors:w,setError:h,clearErrors:S,data:d,setData:C,processing:v}=F({providers:y||[]}),[A,i]=x.useState(!1),[t,u]=x.useState({provider_name:"",client_id:"",client_secret:"",status:1}),s={..._,...w},m=(a,r)=>{let l=!0;switch(a){case"provider_name":case"client_id":case"client_secret":typeof r=="string"&&!r.trim()&&(h(a,`${a.replace("_"," ")} is required.`),l=!1);break;case"status":[1,2].includes(r)||(h(a,"Status must be either ON or OFF."),l=!1);break}return l&&S(a),l},p=(a,r)=>{const{name:l,value:c}=a.target;C(f=>({...f,providers:f.providers.map((j,O)=>O===r?{...j,[l]:c}:j)})),m(l,c)},o=a=>{const{name:r,value:l}=a.target;u(c=>({...c,[r]:l}))},k=async a=>{if(a.preventDefault(),d.providers.every(l=>Object.keys(l).every(c=>m(c,l[c])))){i(!0);try{await N.post(route("social-login.save"),{providers:d.providers},{onSuccess:()=>{i(!1),b("Social login settings updated successfully")},onError:()=>{i(!1),n("An error occurred while submitting the form.")}})}catch{i(!1),n("An error occurred while submitting the form.")}}},E=async a=>{if(console.log(101),a.preventDefault(),Object.keys(t).every(l=>m(l,t[l]))){i(!0);try{await N.post(route("social-login.save"),{providers:[t]},{onSuccess:()=>{$(".modal").modal("hide"),i(!1),b("New provider added successfully")},onError:()=>{i(!1),n("An error occurred while adding the provider.")}}),u({provider_name:"",client_id:"",client_secret:"",status:1})}catch{i(!1),n("An error occurred while adding the provider.")}}};return e.jsxs(P,{isLoading:A,children:[e.jsx(L,{title:g}),e.jsxs("div",{className:"card-box",children:[e.jsxs("button",{className:"btn btn-success float-right",title:"Add Provider","data-toggle":"modal","data-target":"#createModal",children:[e.jsx("i",{className:"fa fa-plus"})," Add Provider"]}),e.jsxs("form",{onSubmit:k,className:"form-horizontal",children:[d.providers.map((a,r)=>e.jsxs("div",{children:[e.jsxs("h5",{className:"mb-4",style:{color:"#f9f9f9"},children:[e.jsx("i",{className:`fa fa-${a.provider_name} pr-2`}),e.jsx("b",{children:`${a.provider_name.charAt(0).toUpperCase()+a.provider_name.slice(1)} Settings`})]}),e.jsx("input",{type:"hidden",name:"provider_name",value:a.provider_name}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:`${a.provider_name.charAt(0).toUpperCase()+a.provider_name.slice(1)} Login`}),e.jsxs("div",{className:"col-sm-8",children:[e.jsxs("select",{className:`form-control ${s[`providers.${r}.status`]?"is-invalid":""}`,name:"status",value:a.status,onChange:l=>p(l,r),children:[e.jsx("option",{value:"1",children:"ON"}),e.jsx("option",{value:"2",children:"OFF"})]}),s[`providers.${r}.status`]&&e.jsx("span",{className:"invalid-feedback",children:s[`providers.${r}.status`]})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Client ID"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"client_id",value:a.client_id,onChange:l=>p(l,r),className:`form-control ${s[`providers.${r}.client_id`]?"is-invalid":""}`}),s[`providers.${r}.client_id`]&&e.jsx("span",{className:"invalid-feedback",children:s[`providers.${r}.client_id`]})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Client Secret"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"client_secret",value:a.client_secret,onChange:l=>p(l,r),className:`form-control ${s[`providers.${r}.client_secret`]?"is-invalid":""}`}),s[`providers.${r}.client_secret`]&&e.jsx("span",{className:"invalid-feedback",children:s[`providers.${r}.client_secret`]})]})]}),e.jsx("hr",{className:"mt-4 mb-4"})]},a.provider_name)),e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"offset-sm-3 col-sm-9 pl-1",children:e.jsx("button",{type:"submit",className:"btn btn-primary waves-effect waves-light",disabled:v,children:v?"Saving...":"Save Settings"})})})]})]}),e.jsx("div",{className:"modal fade",id:"createModal",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content pt-3 pb-3 pl-0 pr-0",children:[e.jsxs("div",{className:"modal-header pl-3 pr-3",children:[e.jsx("h4",{className:"modal-title mt-0",children:"Add Provider"}),e.jsx("button",{type:"button",className:"close",children:"Ã—"})]}),e.jsx("div",{className:"modal-body pl-3 pr-3 pt-3 pb-0",children:e.jsxs("form",{onSubmit:E,className:"form-horizontal",children:[e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-4 col-form-label",children:"Provider Name"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"provider_name",value:t.provider_name,onChange:o,className:`form-control ${s.provider_name?"is-invalid":""}`}),(s==null?void 0:s.provider_name)&&e.jsx("span",{className:"invalid-feedback",children:s==null?void 0:s.provider_name})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-4 col-form-label",children:"Status"}),e.jsx("div",{className:"col-sm-8",children:e.jsxs("select",{className:"form-control",name:"status",value:t.status,onChange:o,children:[e.jsx("option",{value:"1",children:"ON"}),e.jsx("option",{value:"2",children:"OFF"})]})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-4 col-form-label",children:"Client ID"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"client_id",value:t.client_id,onChange:o,className:`form-control ${s.client_id?"is-invalid":""}`}),(s==null?void 0:s.client_id)&&e.jsx("span",{className:"invalid-feedback",children:s==null?void 0:s.client_id})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-4 col-form-label",children:"Client Secret"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"client_secret",value:t.client_secret,onChange:o,className:`form-control ${s.client_secret?"is-invalid":""}`}),(s==null?void 0:s.client_secret)&&e.jsx("span",{className:"invalid-feedback",children:s==null?void 0:s.client_secret})]})]}),e.jsx("div",{className:"modal-footer",style:{marginLeft:"-15px",marginRight:"-15px"},children:e.jsx("button",{type:"submit",className:"btn btn-primary waves-effect waves-light",children:" Save"})})]})})]})})})]})}export{q as default};
