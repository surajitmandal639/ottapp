import{W as D,r as y,j as e,Y as U,y as E}from"./app-DWiplGih.js";import{s as T}from"./SweetAlert-_wzJVbyC.js";import{A}from"./AuthenticatedLayout-RN_dLH_b.js";import{M as h}from"./MySelect-B8IyeJ6e.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./index-8JwjhRSi.js";function X({errors:w,generalSetting:o,timeZones:u,languages:d,currencies:f}){var b,_;const{errors:C,setError:i,clearErrors:k,data:R,setData:t}=D({...o,description:(o==null?void 0:o.description)||"",keywords:(o==null?void 0:o.keywords)||"",header_code:(o==null?void 0:o.header_code)||"",footer_code:(o==null?void 0:o.footer_code)||"",copyright_text:(o==null?void 0:o.copyright_text)||"",logo:null,favicon:null}),a={...w,...C},l={...o,...R},[j,P]=y.useState(null),[v,G]=y.useState(null),p=(s,c)=>{let r=!0;switch(s){case"logo":case"favicon":if(!c&&!o.logo&&!o.favicon){i(s,"File is required."),r=!1;break}if(c instanceof File){const x=["image/jpeg","image/png","image/gif"],$=/[<>:"/\\|?*]/,z=["jpg","jpeg","png","gif"];x.includes(c.type)||(i(s,"Invalid file type. Only JPEG, PNG, and GIF are allowed."),r=!1),c.size>5242880&&(i(s,"File size exceeds 5 MB."),r=!1);const g=c.name;$.test(g)&&(i(s,"File name contains invalid characters."),r=!1);const F=g.split(".").pop().toLowerCase();z.includes(F)||(i(s,"Invalid file extension. Only JPG, JPEG, PNG, and GIF are allowed."),r=!1)}break;case"email":/\S+@\S+\.\S+/.test(c)||(i(s,"Invalid email format."),r=!1);break;case"name":c.trim()||(i(s,"Name is required."),r=!1);break;case"description":case"keywords":c.length>500&&(i(s,"Text is too long. Maximum length is 500 characters."),r=!1);break;case"facebook_url":case"twitter_url":case"instagram_url":case"google_play_url":case"apple_store_url":c&&(/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w- ;,./?%&=]*)?$/.test(c)||(i(s,"Invalid URL format."),r=!1));break}return r&&k(s,null),r},N=s=>{const{name:c,files:r}=s.target,n=r[0];n&&p(c,n)&&(t(x=>({...x,[c]:n})),c==="logo"?P(URL.createObjectURL(n)):c==="favicon"&&G(URL.createObjectURL(n)))},m=s=>{const{name:c,value:r}=s.target;t(n=>({...n,[c]:r})),p(c,r)},L=async s=>{s.preventDefault();const c=Object.keys(l).every(r=>p(r,l[r]));if(console.log(101,c),c){const r=o?"General settings updated successfully":"General settings created successfully";await E.post(route("general-settings.save"),{...l},{onSuccess:()=>{T(r)}})}};return console.log("DATA : ",l),e.jsx(e.Fragment,{children:e.jsxs(A,{children:[e.jsx(U,{title:"General Settings"}),e.jsx("div",{className:"card-box",children:e.jsxs("form",{onSubmit:L,acceptCharset:"UTF-8",className:"form-horizontal",name:"settings_form",id:"settings_form",role:"form",encType:"multipart/form-data",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Site Name"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{className:"form-control",type:"text",name:"name",value:l.name,onChange:m}),a&&(a==null?void 0:a.name)&&e.jsx("span",{className:"text-danger",children:a==null?void 0:a.name})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Site Logo"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{className:"form-control",type:"file",name:"logo",onChange:N}),a.logo&&e.jsx("div",{className:"text-danger",children:a.logo})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label"}),e.jsx("div",{className:"col-sm-8",children:j?e.jsx("img",{className:"img-thumbnail",src:j,alt:"site logo",srcSet:""}):e.jsx("img",{className:"img-thumbnail",src:`/storage/upload/images/general_ettings/${o==null?void 0:o.logo}`,alt:"site logo",srcSet:""})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Site Favicon"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{className:"form-control",type:"file",name:"favicon",onChange:N}),a.favicon&&e.jsx("div",{className:"text-danger",children:a.favicon})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label"}),e.jsx("div",{className:"col-sm-8",children:v?e.jsx("img",{className:"img-thumbnail",src:v,alt:"site logo",srcSet:""}):e.jsx("img",{className:"img-thumbnail",src:`/storage/upload/images/general_ettings/${o==null?void 0:o.favicon}`,alt:"site favicon",srcSet:""})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Email"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{className:"form-control",type:"email",name:"email",value:l.email,onChange:m,required:!0}),a&&(a==null?void 0:a.email)&&e.jsx("span",{className:"text-danger",children:a==null?void 0:a.email})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Description"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{className:"form-control",name:"description",value:l.description,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Site Keywords"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{name:"keywords",className:"form-control",value:l.keywords,onChange:m})})]}),e.jsx("div",{className:"form-group row"}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Header Code"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{className:"form-control",name:"header_code",value:l.header_code,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Footer Code"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{className:"form-control",name:"footer_code",value:l.footer_code,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Copyright Text"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{className:"form-control",name:"copyright_text",value:l.copyright_text,onChange:m})})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Default Timezone"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx(h,{name:"default_timezone",options:Object.keys(u).map(s=>({value:s,label:u[s]})),value:l.default_timezone?{value:l.default_timezone,label:u[l.default_timezone]}:null,onChange:s=>t("default_timezone",s.value),placeholder:"Select a timezone",isClearable:!1,isSearchable:!0,className:`${a.default_timezone?"is-invalid":""}`}),a&&a.default_timezone&&e.jsx("span",{className:"invalid-feedback",children:a.default_timezone})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Default Language"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx(h,{name:"default_language",options:Object.keys(d).map(s=>({value:s,label:`${d[s].isoName} (${d[s].nativeName})`})),value:l.default_language?{value:l.default_language,label:`${d[l.default_language].isoName} (${d[l.default_language].nativeName})`}:null,onChange:s=>t("default_language",s.value),placeholder:"Select a language",isClearable:!1,isSearchable:!0,className:`${a.default_language?"is-invalid":""}`}),a&&a.default_language&&e.jsx("span",{className:"invalid-feedback",children:a.default_language})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Site Styling"}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx(h,{className:`${a.styling?"is-invalid":""}`,name:"styling",options:[{value:"style-one",label:"Style 1"},{value:"style-two",label:"Style 2"},{value:"style-three",label:"Style 3"},{value:"style-four",label:"Style 4"},{value:"style-five",label:"Style 5"},{value:"style-six",label:"Style 6"}],value:l.styling?{value:l.styling,label:`Style ${l.styling.split("-")[1]}`}:null,onChange:s=>t("styling",s.value),isClearable:!1,isSearchable:!1}),a.styling&&e.jsx("span",{className:"invalid-feedback",children:a.styling})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Currency Code* "}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx(h,{name:"currency_code",options:f.map(s=>({value:s.alphabetic_code,label:`${s.alphabetic_code} (${s.name})`})),value:l.currency_code?{value:l.currency_code,label:`${(b=f.find(s=>s.alphabetic_code==l.currency_code))==null?void 0:b.alphabetic_code} (${(_=f.find(s=>s.alphabetic_code===l.currency_code))==null?void 0:_.name})`}:null,onChange:s=>t("currency_code",s.value),placeholder:"Select a currency",isClearable:!1,isSearchable:!0,className:`${a.currency_code?"is-invalid":""}`}),a&&a.currency_code&&e.jsx("span",{className:"invalid-feedback",children:a.currency_code})]})]}),e.jsx("hr",{}),e.jsx("h4",{className:"m-t-0 header-title",id:"tmdbapi_id",children:"TMDB API"}),e.jsx("br",{}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"API Read Access Token"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{className:"form-control",name:"tmdb_api_key",value:l.tmdb_api_key,onChange:m})})]}),e.jsx("hr",{}),e.jsxs("h4",{className:"m-t-0 header-title",children:["Footer Icon",e.jsx("small",{className:"form-text text-muted pt-1",children:"Leave empty if you don't want to display the social icon."})]}),e.jsx("br",{}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Facebook URL"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"facebook_url",value:l.facebook_url,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Twitter URL"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"twitter_url",value:l.twitter_url,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Instagram URL"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"instagram_url",value:l.instagram_url,onChange:m})})]}),e.jsx("hr",{}),e.jsxs("h4",{className:"m-t-0 header-title",children:["Apps ",e.jsx("small",{className:"form-text text-muted pt-1",children:"Leave empty if you don't want to display the app download button."})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Google Play URL"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"google_play_url",value:l.google_play_url,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Apple Store URL"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"apple_store_url",value:l.apple_store_url,onChange:m})})]})]})]}),e.jsx("hr",{}),e.jsx("h4",{className:"m-t-0 mb-4 header-title",children:"GDPR Cookie Consent"}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"GDPR Cookie Consent "}),e.jsx("div",{className:"col-sm-8",children:e.jsxs("select",{className:"form-control",name:"gdpr_cookie_consent",value:l.gdpr_cookie_consent,onChange:s=>t("gdpr_cookie_consent",s.target.value),children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"2",children:"Inactive"})]})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"GDPR Consent Title"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"gdpr_consent_title",value:l.gdpr_consent_title,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"GDPR Consent Text"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"gdpr_consent_text",value:l.gdpr_consent_text,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"GDPR Privacy URL"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"gdpr_privacy_url",value:l.gdpr_privacy_url,onChange:m})})]}),e.jsx("hr",{}),e.jsx("h4",{className:"m-t-0 mb-4 header-title",children:"Envato Buyer Details"}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Envato Username"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"envato_username",value:l.envato_username,onChange:m})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Buyer Purchase Code"}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{className:"form-control",type:"text",name:"buyer_purchase_code",value:l.buyer_purchase_code,onChange:m})})]}),e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"offset-sm-3 col-sm-9 pl-1",children:e.jsx("button",{type:"submit",className:"btn btn-primary waves-effect waves-light",children:" Save Settings "})})})]})})]})})}export{X as default};
