import{W as N,r as k,j as e,Y as w,y as E}from"./app-DWiplGih.js";import{s as A,a as p}from"./SweetAlert-_wzJVbyC.js";import{A as S}from"./AuthenticatedLayout-RN_dLH_b.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./MyImage-BxCI3zcA.js";function V({title:u,errors:h,purchase:r}){const{errors:x,setError:i,clearErrors:f,data:_,setData:b,processing:v}=N({buyer_name:(r==null?void 0:r.buyer_name)||"",purchase_code:(r==null?void 0:r.purchase_code)||"",app_package_name:(r==null?void 0:r.app_package_name)||""}),[j,t]=k.useState(!1),o={...h,...x},n={...r,..._},m=async(a,c)=>{let s=!0;switch(a){case"buyer_name":case"app_package_name":case"purchase_code":c.trim()||(i(a,`${a.replace("_"," ")} is required.`),s=!1);break;case"purchase_code":c.trim()&&(s=await g(a,c));break}return s&&f(a),s},g=async(a,c)=>{let s=!0;try{await axios.post(route("verify-purchase-app.checkUnique"),{field:a,value:c,id:(r==null?void 0:r.id)||null})&&i(a,`${a.charAt(0).toUpperCase()+a.slice(1)} must be unique.`)}catch(d){console.error("Error checking uniqueness",d)}return s},l=a=>{const{name:c,value:s}=a.target;b(c,s),m(c,s)},y=async a=>{if(a.preventDefault(),Object.keys(n).every(s=>m(s,n[s]))){t(!0);try{await E.post(route("verify-purchase-app.save"),n,{onSuccess:()=>{t(!1),A("Purchase details updated successfully.")},onError:()=>{t(!1),p("An error occurred while submitting the form.")}})}catch(s){t(!1),console.log(s),p("An error occurred while submitting the form.")}}};return e.jsxs(S,{isLoading:j,children:[e.jsx(w,{title:u}),e.jsx("div",{className:"card-box",children:e.jsxs("form",{onSubmit:y,className:"form-horizontal",children:[e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-3 col-form-label",children:["Envato Username ",e.jsx("span",{className:"text-danger",children:" *"})]}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"buyer_name",value:n.buyer_name,onChange:l,className:`form-control ${o.buyer_name?"is-invalid":""}`}),o.buyer_name&&e.jsx("div",{className:"invalid-feedback",children:o.buyer_name})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-3 col-form-label",children:["Buyer Purchase Code ",e.jsx("span",{className:"text-danger",children:" *"})]}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"purchase_code",value:n.purchase_code,onChange:l,className:`form-control ${o.purchase_code?"is-invalid":""}`}),o.purchase_code&&e.jsx("div",{className:"invalid-feedback",children:o.purchase_code}),e.jsxs("small",{className:"form-text text-muted",children:["If you don't know, ",e.jsx(Link,{href:"#",target:"_blank",rel:"noopener noreferrer",children:"click here"})]})]})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-3 col-form-label",children:["App Package Name ",e.jsx("span",{className:"text-danger",children:" *"})]}),e.jsxs("div",{className:"col-sm-8",children:[e.jsx("input",{type:"text",name:"app_package_name",value:n.app_package_name,onChange:l,className:`form-control ${o.app_package_name?"is-invalid":""}`}),o.app_package_name&&e.jsx("div",{className:"invalid-feedback",children:o.app_package_name})]})]}),e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"offset-sm-3 col-sm-9 pl-1",children:e.jsx("button",{type:"submit",className:"btn btn-primary waves-effect waves-light",disabled:v,children:" Save "})})})]})})]})}export{V as default};
