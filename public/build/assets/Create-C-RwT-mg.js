import{W as N,r as i,j as e,Y as _,a as v,y}from"./app-DWiplGih.js";import{s as w}from"./SweetAlert-_wzJVbyC.js";import{A as C}from"./AuthenticatedLayout-RN_dLH_b.js";import{M as I}from"./MyImage-BxCI3zcA.js";import{F as a}from"./Form-vWb3q4NQ.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./index-C5nD6nVr.js";const R=({auth:h,errors:t,director:s})=>{var r;const{data:o,setData:n,processing:b,reset:p}=N({name:(s==null?void 0:s.name)||"",bio:(s==null?void 0:s.bio)||"",place_of_birth:(s==null?void 0:s.place_of_birth)||"",date_of_birth:(s==null?void 0:s.date_of_birth)||"",status:(s==null?void 0:s.status)||1,images:[]}),[E,c]=i.useState([]),[f,x]=i.useState("");i.useEffect(()=>{s&&s.image_urls&&c(s.image_urls)},[s]),i.useEffect(()=>{const l=Object.keys(t).filter(m=>m.startsWith("images."));l.length>0&&x(l.map(m=>t[m]).join(", "))},[t]);const d=l=>{const m=Array.from(l.target.files);n("images",m);const u=m.map(j=>URL.createObjectURL(j));c(u)},g=async l=>{l.preventDefault();const m=s?"Director updated successfully.":"Director created successfully.";await y.post(route("admin.directors.save",encryptString(o==null?void 0:o.id)),{...o},{onSuccess:()=>{w(m),s||p()}})};return console.log(s),e.jsxs(C,{user:h.user,children:[e.jsx(_,{title:s?"Edit Director":"Add Director"}),e.jsxs("div",{className:"card-box table-responsive",children:[e.jsx("div",{className:"row",children:e.jsx(v,{href:"#",onClick:()=>window.history.back(),children:e.jsxs("h4",{className:"header-title m-t-0 m-b-30 text-primary pull-left",style:{fontSize:"20px"},children:[e.jsx("i",{className:"fa fa-arrow-left"})," Back"]})})}),e.jsxs(a,{onSubmit:g,encType:"multipart/form-data",children:[e.jsxs(a.Group,{className:"row align-items-center mb-3",controlId:"name",children:[e.jsx(a.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Name"}),e.jsx(a.Control,{className:"col-sm-10",type:"text",value:o.name,onChange:l=>n("name",l.target.value),isInvalid:!!t.name,placeholder:"Enter name"}),e.jsx(a.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.name})]}),e.jsxs(a.Group,{className:"row align-items-center mb-3",controlId:"bio",children:[e.jsx(a.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Bio"}),e.jsx(a.Control,{className:"col-sm-10",as:"textarea",value:o.bio,onChange:l=>n("bio",l.target.value),isInvalid:!!t.bio,placeholder:"Enter bio"}),e.jsx(a.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.bio})]}),e.jsxs(a.Group,{className:"row align-items-center mb-3",controlId:"place_of_birth",children:[e.jsx(a.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Place of Birth"}),e.jsx(a.Control,{className:"col-sm-10",type:"text",value:o.place_of_birth,onChange:l=>n("place_of_birth",l.target.value),isInvalid:!!t.place_of_birth,placeholder:"Enter place of birth"}),e.jsx(a.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.place_of_birth})]}),e.jsxs(a.Group,{className:"row align-items-center mb-3",controlId:"date_of_birth",children:[e.jsx(a.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Date of Birth"}),e.jsx(a.Control,{className:"col-sm-10",type:"date",value:o.date_of_birth,onChange:l=>n("date_of_birth",l.target.value),isInvalid:!!t.date_of_birth}),e.jsx(a.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.date_of_birth})]}),e.jsxs(a.Group,{className:"row align-items-center mb-3",controlId:"images",children:[e.jsx(a.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Images"}),e.jsx(a.Control,{className:"col-sm-10",type:"file",name:"images[]",multiple:!0,onChange:d}),e.jsx(a.Control.Feedback,{className:f?"d-block text-danger offset-sm-2":"",children:f}),e.jsx("small",{className:"offset-sm-2 form-text text-muted mb-3",children:"(Recommended resolution: 180x140)"})]}),e.jsxs(a.Group,{className:"row mb-3",children:[e.jsx("label",{className:"offset-sm-2"}),((r=s==null?void 0:s.images)==null?void 0:r.length)>0?s.images.map((l,m)=>e.jsx(I,{type:"directors",filename:l.filename,altText:`Image for ${s.name}`,class:"img-thumbnail mr-1",style:{width:"180px"}},m)):e.jsx("p",{className:"offset-sm-2",children:"No images available for this director."})]}),e.jsx(a.Group,{className:"row align-items-center mb-3",children:e.jsx("div",{className:"offset-sm-2 col-sm-9 pl-1",children:e.jsx("button",{type:"submit",className:"btn btn-primary waves-effect waves-light",disabled:b,children:s?"Update":"Save"})})})]})]})]})};export{R as default};
