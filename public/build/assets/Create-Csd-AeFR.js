import{W as N,r as n,j as e,Y as _,a as v,y}from"./app-DWiplGih.js";import{s as w}from"./SweetAlert-_wzJVbyC.js";import{A as C}from"./AuthenticatedLayout-RN_dLH_b.js";import{M as I}from"./MyImage-BxCI3zcA.js";import{F as l}from"./Form-vWb3q4NQ.js";import"./jquery-TLgHKWof.js";import"./bootstrap.esm-Bb0rKlaf.js";import"./Loder-D9bdZO9o.js";import"./index-C5nD6nVr.js";const D=({auth:f,errors:t,actor:s})=>{var d;const{data:m,setData:o,processing:h,reset:b}=N({name:(s==null?void 0:s.name)||"",bio:(s==null?void 0:s.bio)||"",place_of_birth:(s==null?void 0:s.place_of_birth)||"",date_of_birth:(s==null?void 0:s.date_of_birth)||"",status:(s==null?void 0:s.status)||1,images:[]}),[E,r]=n.useState([]),[c,p]=n.useState("");n.useEffect(()=>{s&&s.image_urls&&r(s.image_urls)},[s]),n.useEffect(()=>{const a=Object.keys(t).filter(i=>i.startsWith("images."));a.length>0&&p(a.map(i=>t[i]).join(", "))},[t]);const x=a=>{const i=Array.from(a.target.files);o("images",i);const u=i.map(j=>URL.createObjectURL(j));r(u)},g=async a=>{a.preventDefault();const i=s?"Actor updated successfully.":"Actor created successfully.";await y.post(route("actors.save",encryptString(m==null?void 0:m.id)),{...m},{onSuccess:()=>{w(i),s||b()}})};return console.log(s),e.jsxs(C,{user:f.user,children:[e.jsx(_,{title:s?"Edit Actor":"Add Actor"}),e.jsxs("div",{className:"card-box table-responsive",children:[e.jsx("div",{className:"row",children:e.jsx(v,{href:"#",onClick:()=>window.history.back(),children:e.jsxs("h4",{className:"header-title m-t-0 m-b-30 text-primary pull-left",style:{fontSize:"20px"},children:[e.jsx("i",{className:"fa fa-arrow-left"})," Back"]})})}),e.jsxs(l,{onSubmit:g,encType:"multipart/form-data",children:[e.jsxs(l.Group,{className:"row align-items-center mb-3",controlId:"name",children:[e.jsx(l.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Name"}),e.jsx(l.Control,{className:"col-sm-10",type:"text",value:m.name,onChange:a=>o("name",a.target.value),isInvalid:!!t.name,placeholder:"Enter name"}),e.jsx(l.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.name})]}),e.jsxs(l.Group,{className:"row align-items-center mb-3",controlId:"bio",children:[e.jsx(l.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Bio"}),e.jsx(l.Control,{className:"col-sm-10",as:"textarea",value:m.bio,onChange:a=>o("bio",a.target.value),isInvalid:!!t.bio,placeholder:"Enter bio"}),e.jsx(l.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.bio})]}),e.jsxs(l.Group,{className:"row align-items-center mb-3",controlId:"place_of_birth",children:[e.jsx(l.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Place of Birth"}),e.jsx(l.Control,{className:"col-sm-10",type:"text",value:m.place_of_birth,onChange:a=>o("place_of_birth",a.target.value),isInvalid:!!t.place_of_birth,placeholder:"Enter place of birth"}),e.jsx(l.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.place_of_birth})]}),e.jsxs(l.Group,{className:"row align-items-center mb-3",controlId:"date_of_birth",children:[e.jsx(l.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Date of Birth"}),e.jsx(l.Control,{className:"col-sm-10",type:"date",value:m.date_of_birth,onChange:a=>o("date_of_birth",a.target.value),isInvalid:!!t.date_of_birth}),e.jsx(l.Control.Feedback,{type:"invalid",className:" offset-sm-2",children:t.date_of_birth})]}),e.jsxs(l.Group,{className:"row align-items-center mb-3",controlId:"images",children:[e.jsx(l.Label,{className:"col-sm-2 col-form-label font-weight-bold",children:"Images"}),e.jsx(l.Control,{className:"col-sm-10",type:"file",name:"images[]",multiple:!0,onChange:x}),e.jsx(l.Control.Feedback,{className:c?"d-block text-danger offset-sm-2":"",children:c}),e.jsx("small",{className:"offset-sm-2 form-text text-muted mb-3",children:"(Recommended resolution: 180x140)"})]}),e.jsxs(l.Group,{className:"row mb-3",children:[e.jsx("label",{className:"offset-sm-2"}),((d=s==null?void 0:s.images)==null?void 0:d.length)>0?s.images.map((a,i)=>e.jsx(I,{type:"actors",filename:a.filename,altText:`Image for ${s.name}`,class:"img-thumbnail mr-1",style:{width:"180px"}},i)):e.jsx("p",{className:"offset-sm-2",children:"No images available for this actor."})]}),e.jsx(l.Group,{className:"row align-items-center mb-3",children:e.jsx("div",{className:"offset-sm-2 col-sm-9 pl-1",children:e.jsx("button",{type:"submit",className:"btn btn-primary waves-effect waves-light",disabled:h,children:s?"Update":"Save"})})})]})]})]})};export{D as default};
